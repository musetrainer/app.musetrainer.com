"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9045],{9045:(h,f,c)=>{c.r(f),c.d(f,{CapacitorMuseTrainerMidiWeb:()=>p});var u=c(8239),m=c(8384);class p extends m.WebPlugin{constructor(){super(...arguments),this.midiInputs=[],this.midiOutputs=[],this.access=null}addListener(n,a){var e=this;return(0,u.Z)(function*(){return"deviceChange"===n?(e.access||(yield e.listDevices()),e.access&&(e.access.onstatechange=()=>a(e.listDevices())),{remove:(i=(0,u.Z)(function*(){e.access&&(e.access.onstatechange=()=>{})}),function(){return i.apply(this,arguments)})}):"commandReceive"===n?(e.midiInputs.forEach(i=>{i.onmidimessage=s=>{const r=s.data[0]>>4;let t=0;s.data.length>1&&(t=s.data[1]);let o=0;s.data.length>2&&(o=s.data[2]),8===r||9===r&&0===o?a({type:"noteOff",dataByte1:t,dataByte2:o}):9===r&&a({type:"noteOn",dataByte1:t,dataByte2:o})}}),{remove:function(){var i=(0,u.Z)(function*(){e.midiInputs.forEach(s=>s.onmidimessage=()=>{})});return function(){return i.apply(this,arguments)}}()}):{remove:function(){var i=(0,u.Z)(function*(){});return function(){return i.apply(this,arguments)}}()};var i})()}sendCommand({command:n,timestamp:a}){var e=this;return(0,u.Z)(function*(){e.midiOutputs.forEach(i=>{i.send(n,a)})})()}listDevices(){var n=this;return(0,u.Z)(function*(){var a,e,i;n.access=yield null===(a=navigator.requestMIDIAccess)||void 0===a?void 0:a.call(navigator,{sysex:!0});const s=[],d=[],l=n.access.inputs.values();for(let t=l.next();!t.done;t=l.next())null!==(e=t.value.name)&&void 0!==e&&e.includes("Midi Through")||s.push(t.value);const r=n.access.outputs.values();for(let t=r.next();!t.done;t=r.next())null!==(i=t.value.name)&&void 0!==i&&i.includes("Midi Through")||d.push(t.value);return n.midiInputs=s,n.midiOutputs=d,{devices:s.map(t=>t.manufacturer||"")}})()}}}}]);